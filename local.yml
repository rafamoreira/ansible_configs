---
- hosts: localhost
  connection: local

  tasks:
    - name: install base packages
      become: true
      package:
        name:
          - htop
          - tmux
          - vim
          - keychain
          - openssh
          - wget
          - python

    - name: clone dotfiles repository
      ansible.builtin.git:
        repo: 'https://github.com/rafamoreira/dotfiles.git'
        dest: /home/rmc/dotfiles

    - name: link zshrc
      ansible.builtin.file:
        src: /home/rmc/dotfiles/zsh/zshrc
        dest: /home/rmc/.zshrc
        owner: rmc
        group: rmc
        state: link

    - name: link zprofile
      ansible.builtin.file:
        src: /home/rmc/dotfiles/zsh/zprofile
        dest: /home/rmc/.zprofile
        owner: rmc
        group: rmc
        state: link
    
    - name: link gitconfig
      ansible.builtin.file:
        src: /home/rmc/dotfiles/git/.gitconfig
        dest: /home/rmc/.gitconfig
        owner: rmc
        group: rmc
        state: link
